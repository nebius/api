syntax = "proto3";

package nebius.compute.v1alpha1;

import "buf/validate/validate.proto";
import "nebius/annotations.proto";
import "nebius/common/v1/metadata.proto";

// Migrate to compute/v1.
option deprecated = true;
option go_package = "github.com/nebius/gosdk/proto/nebius/compute/v1alpha1";
option java_multiple_files = true;
option java_outer_classname = "GpuClusterProto";
option java_package = "ai.nebius.pub.compute.v1alpha1";

message GpuCluster {
  common.v1.ResourceMetadata metadata = 1;

  GpuClusterSpec spec = 2;

  GpuClusterStatus status = 3;
}

message GpuClusterSpec {
  string infiniband_fabric = 1 [
    (buf.validate.field).required = true,
    (field_behavior) = IMMUTABLE
  ];
}

message GpuClusterStatus {
  repeated string instances = 1;

  // Indicates whether there is an ongoing operation
  bool reconciling = 2;
}
