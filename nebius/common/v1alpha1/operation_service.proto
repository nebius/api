syntax = "proto3";

package nebius.common.v1alpha1;

import "buf/validate/validate.proto";
import "nebius/annotations.proto";
import "nebius/common/v1alpha1/operation.proto";

option deprecated = true;
option go_package = "github.com/nebius/gosdk/proto/nebius/common/v1alpha1";
option java_multiple_files = true;
option java_outer_classname = "OperationServiceProto";
option java_package = "ai.nebius.pub.common.v1alpha1";
option (file_deprecation_details) = {description: "migrate to common/v1"};

// Service for reading operations.
service OperationService {
  option deprecated = true;
  option (service_deprecation_details) = {description: "migrate to common/v1"};

  // Returns the latest state of the specified operation.
  rpc Get(GetOperationRequest) returns (Operation);

  // Lists operations for the specified resource.
  rpc List(ListOperationsRequest) returns (ListOperationsResponse);
}

message GetOperationRequest {
  option deprecated = true;
  option (message_deprecation_details) = {description: "migrate to common/v1"};

  // Operation ID.
  string id = 1 [(buf.validate.field).required = true];
}

message ListOperationsRequest {
  option deprecated = true;
  option (message_deprecation_details) = {description: "migrate to common/v1"};

  // ID of the Resource to list operations for.
  string resource_id = 1 [(buf.validate.field).required = true];

  // Page size. [1...1000]. Optional, if not specified, a reasonable default will be chosen by the service.
  int64 page_size = 2;

  // Listing continuation token. Empty to start listing from the first page.
  string page_token = 3;

  // Filter expression for the listing results. Optional.
  // Filter expression format: TBD.
  string filter = 4;
}

message ListOperationsResponse {
  option deprecated = true;
  option (message_deprecation_details) = {description: "migrate to common/v1"};

  // List of operations on this result page.
  repeated Operation operations = 1;

  // Listing continuation token for the next page of results.
  string next_page_token = 2;
}

message ListOperationsByParentRequest {
  option deprecated = true;
  option (message_deprecation_details) = {description: "migrate to common/v1"};

  // ID of the parent to list operations for resource type at.
  string parent_id = 1 [(buf.validate.field).required = true];

  // Page size. [1...1000]. Optional, if not specified, a reasonable default will be chosen by the service.
  int64 page_size = 2;

  // Listing continuation token. Empty to start listing from the first page.
  string page_token = 3;

  // Filter expression for the listing results. Optional.
  // Filter expression format: TBD.
  string filter = 4;
}
